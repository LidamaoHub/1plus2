<!DOCTYPE html>
<html>
<head lang="en">

    <script src="js/jquery.js"></script>



<meta name="viewport" content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no"><meta name="viewport" content="width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">



    <meta charset="UTF-8">
    <title></title>

<link href="css/bootstrap.css" rel="stylesheet" type="text/css"/>

<link href="css/flat-ui.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<center>
    <strong><p style="font-size:40px;height:52px;margin-top:0px" id="title">Try Try See</p></strong>
    <p  id="title2" style="height:17px">please click the right button</p>
    <p id="last_time" style="height:17px;margin-top:0px">700</p>


<div id="question" style="font-size:30px;margin-bottom:15px">
</div>

<div id="button">
    <button class="b btn btn-embossed btn-danger" style="width:200px"ans="1"><strong>1</strong></button><br><br>
    <button class="b btn btn-embossed btn-info" style="width:200px"ans="2"><strong>2</strong></button><br><br>
    <button class="b btn btn-embossed btn-primary" style="width:200px"ans="3"><strong>3</strong></button>
</div>
<div id="retry">
<button class="btn btn-hg btn-warning" style="width:200px">
  Retry!
</button>
</div>
<audio id="coin"><source src="music/coin.mp3" type="audio/mp3"></audio>
<audio id="died"><source src="music/died.mp3" type="audio/mp3"></audio>
</center>
<script>








$("#retry").hide()
    var timerc=0;//全局时间变量（秒数）
    var result = 0;
    var round = 1;
    var best = 0;
    var amount = 0;
    var msg = [];
    var game = 0;

    function clock_start(){
        if(game==0){


        if(timerc < 700){
            ++timerc;
            $("#last_time").html(parseInt(700-timerc));
            setTimeout("clock_start()", 1);
        }
        else if(timerc <750&&timerc>=700)
        {
            ++timerc;
            setTimeout("clock_start()", 1);
        }
        else
        {
            $("#title").html("Sorry but time out")
            game_over()
        }

        }
    };



    function game_over(){
        $("#button").hide()
        $("#retry").show()
        $('#died')[0].play();
        if(best<round)
        {
            best = round
        }
        $("#last_time").html("best score:"+best)


    }

    function retry()
    {
        game = 0;
        $("#button").show()
        $("#retry").hide()
            time = 0;
            round = 1;
            result = 0;
            creat_question()
            $("#last_time").html("700")

            $("#title").html("Try Try See")
            $("#title2").html("please the right button")
    }

    function creat_amount(){
        amount = 0
            if(round<=10)
            {msg = [2,3]}
            else if(round>10&&round<=20)
            {msg = [2,3,4]}
            else if(round>20&&round<=30)
            {msg = [3,4]}
            else if(round>30&&round<=40)
            {msg = [3,4,5]}
            else if(round>40&&round<=50)
            {msg = [4,5]}
            else
            {
                alert("You NB!!!")
                return
            }
            amount = msg[Math.floor(Math.random() * msg.length)]-1;


            return amount
        }
    function creat_question(){
        result = 0
        amount = creat_amount()
        var num_pool = [1,2,3]
        var num = num_pool[Math.floor(Math.random() * 3)]
        var symbol = 0
        while(true)
        {
            $("#question").empty()
        $("#question").append("<span>"+num+"</span>")
        result = num
        for(var i=0;i<=amount-1;i++)
            {
                num = num_pool[Math.floor(Math.random() * 3)]
                if(Math.floor( Math.random() * 2 )==0)
                    {
                        symbol = "+"
                        result = result+num
                    }
                else
                    {
                        symbol = "-"
                        result = result-num
                    }
                $("#question").append("<span>"+symbol+"</span>")
                $("#question").append("<span>"+num+"</span>")
            }

            if([1,2,3].indexOf(result)!=-1)
            {
                $("#question").append("<span>=</span>")
                $("#question").append("<span id='answer'>?</span>")
                break
            }
            $("#question").empty()
        }



    }
    function next()
    {
        timerc = 0
        round = round+1
        creat_amount()
        creat_question()
        $('#coin')[0].play();
        clock_start()


    }

    $(".b").click(function(){
        $("#title2").html("your score:"+round)
        you_ans = parseInt($(this).attr("ans"))
        if(you_ans==parseInt(result))
        {
            next()
        }
        else
        {
            game = 1;


            $("#title").html("Are you kidding me?")
            $("#answer").html("<span style='color:red'>"+you_ans+"</span>")

            game_over()
        }
})

    $("#retry").click(function(){
            retry()
        })



creat_question()

//powered by david500834
</script>
</body>
</html>

